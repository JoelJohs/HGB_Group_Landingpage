---
import hgbLogo from "../assets/hgb_logo.svg?url";
import hamburgerIcon from "../assets/navbar/Hamburger.svg?url";
import closeIcon from "../assets/navbar/Cross.svg?url";
---

<nav
  id="navbar"
  class="fixed top-0 inset-x-0 z-50 h-20 navbar-height bg-transparent text-white transition-colors duration-300"
>
  <div class="container mx-auto flex items-center justify-between p-4 h-full">
    <a href="/">
      <img
        id="logo"
        src={hgbLogo}
        alt="Logo HGB"
        class="h-10 md:h-12 hover:h-14 drop-shadow-md filter invert transition-all duration-300"
      />
    </a>

    <!-- Botón para menú móvil -->
    <button
      id="menu-toggle"
      class="relative block lg:hidden w-8 h-8 focus:outline-none"
    >
      <img
        id="icon-open"
        src={hamburgerIcon}
        alt="Abrir menú"
        class="w-full h-full transition-opacity duration-300"
      />
      <img
        id="icon-close"
        src={closeIcon}
        alt="Cerrar menú"
        class="w-full h-full transition-opacity duration-300 opacity-0 absolute inset-0"
      />
    </button>

    <!-- Menú para pantallas lg+ -->
    <ul class="hidden lg:flex space-x-6 md:text-lg lg:text-xl">
      <li>
        <a
          href="#nosotros"
          class="inline-block hover:text-[var(--color-accent-500)] font-bold hover:scale-105 transform transition-transform duration-300"
        >
          Nosotros
        </a>
      </li>
      <li>
        <a
          href="#proyectos"
          class="inline-block hover:text-[var(--color-accent-500)] font-bold hover:scale-105 transform transition-transform duration-300"
        >
          Proyectos destacados
        </a>
      </li>
      <li>
        <a
          href="#servicios"
          class="inline-block hover:text-[var(--color-accent-500)] font-bold hover:scale-105 transform transition-transform duration-300"
        >
          Servicios
        </a>
      </li>
      <li>
        <a
          href="#mision-vision"
          class="inline-block hover:text-[var(--color-accent-500)] font-bold hover:scale-105 transform transition-transform duration-300"
        >
          Misión y Visión
        </a>
      </li>
      <li>
        <a
          href="#ubicacion"
          class="inline-block hover:text-[var(--color-accent-500)] font-bold hover:scale-105 transform transition-transform duration-300"
        >
          Ubicación
        </a>
      </li>
    </ul>
  </div>

  <!-- Overlay menú móvil full‑screen -->
  <div
    id="mobile-menu"
    class="lg:hidden fixed inset-x-0 top-[4rem] hidden bg-[var(--color-background-50)] z-50"
  >
    <ul class="flex flex-col justify-evenly h-[calc(100vh-4rem)]">
      <li class="w-full">
        <a
          href="#nosotros"
          class="block text-2xl text-center p-4 hover:text-[var(--color-accent-500)] font-bold hover:scale-105 transform transition-transform duration-300"
        >
          Nosotros
        </a>
      </li>
      <li class="w-full">
        <a
          href="#proyectos"
          class="block text-2xl text-center p-4 hover:text-[var(--color-accent-500)] font-bold hover:scale-105 transform transition-transform duration-300"
        >
          Proyectos destacados
        </a>
      </li>
      <li class="w-full">
        <a
          href="#servicios"
          class="block text-2xl text-center p-4 hover:text-[var(--color-accent-500)] font-bold hover:scale-105 transform transition-transform duration-300"
        >
          Servicios
        </a>
      </li>
      <li class="w-full">
        <a
          href="#mision-vision"
          class="block text-2xl text-center p-4 hover:text-[var(--color-accent-500)] font-bold hover:scale-105 transform transition-transform duration-300"
        >
          Misión y Visión
        </a>
      </li>
      <li class="w-full">
        <a
          href="#ubicacion"
          class="block text-2xl text-center p-4 hover:text-[var(--color-accent-500)] font-bold hover:scale-105 transform transition-transform duration-300"
        >
          Ubicación
        </a>
      </li>
    </ul>
  </div>

  <script type="module">
    document.addEventListener("DOMContentLoaded", () => {
      const navbar = document.getElementById("navbar");
      const logo = document.getElementById("logo");
      const links = navbar.querySelectorAll("ul li a");
      const menuToggle = document.getElementById("menu-toggle");
      const mobileMenu = document.getElementById("mobile-menu");
      const iconOpen = document.getElementById("icon-open");
      const iconClose = document.getElementById("icon-close");
      const trigger = document.getElementById("nosotros");
      const offset = trigger.offsetTop - navbar.offsetHeight;

      // Toggle mobile icons
      menuToggle.addEventListener("click", () => {
        mobileMenu.classList.toggle("hidden");
        iconOpen.classList.toggle("opacity-0");
        iconClose.classList.toggle("opacity-0");
      });

      function onScroll() {
        if (window.innerWidth < 1024) {
          navbar.classList.remove("bg-transparent");
          navbar.classList.add(
            "bg-[var(--color-background-50)]",
            "text-[var(--color-text-900)]",
            "shadow"
          );
          logo.classList.remove("invert");
          links.forEach((a) => {
            a.classList.remove("text-white");
            a.classList.add("text-[var(--color-text-900)]");
          });
        } else {
          if (window.scrollY >= offset) {
            navbar.classList.remove("bg-transparent");
            navbar.classList.add(
              "bg-[var(--color-background-50)]",
              "text-[var(--color-text-900)]",
              "shadow"
            );
            logo.classList.remove("invert");
            links.forEach((a) => {
              a.classList.remove("text-white");
              a.classList.add("text-[var(--color-text-900)]");
            });
          } else {
            navbar.classList.add("bg-transparent", "text-white");
            navbar.classList.remove(
              "bg-[var(--color-background-50)]",
              "text-[var(--color-text-900)]",
              "shadow"
            );
            logo.classList.add("invert");
            links.forEach((a) => {
              a.classList.remove("text-[var(--color-text-900)]");
              a.classList.add("text-white");
            });
          }
        }
      }

      onScroll();
      window.addEventListener("scroll", onScroll);
    });
  </script>
</nav>
